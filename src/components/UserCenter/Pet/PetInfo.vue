<template>
  <div class="my-pets">
    <a class="iconfont back-icon" @click="back()" v-if="editActive">
      &#xe632;
      <span style="font-size:15px;">返回</span>
    </a>
    <h3 class="title">宠物详情</h3>
    <div class="content" v-if="showContent">
      <div style="float:right; margin-top:10px;margin-right:30px">
        <button class="edit-info" @click="back()">编辑</button>
        <button class="edit-info" @click="deletePet()">删除</button>
      </div>
      <div class="pet-avatar">
        <el-avatar :size="100" :src="petInfomation.default_image_hz.image_hz"></el-avatar>
      </div>
      <div>
        <div class="pet-info-item">
          <span>
            <svg
              t="1600238957909"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="11539"
              width="16"
              height="16"
            >
              <path
                d="M511.8 950c-54.8 0-104.5-4.4-147.7-13.1-48.8-9.8-91-25.4-125.5-46.4-38.7-23.6-68.6-54.4-88.8-91.6-21.4-39.4-32.3-86.5-32.3-140 0-57 12.5-113.7 36.4-165.4-12.6-18.9-18.1-46.5-16.9-83.5 1.2-34.8 8.5-79.3 21.6-132.3 22-88.4 52.6-169.9 53.9-173.3l9.3-24.5 25.6 5.9c81.1 18.7 118.9 96.9 146.4 153.9 6.3 13.1 13.2 27.3 19.3 37.4 32.2-8.3 65.3-12.5 98.7-12.5 32.8 0 65.3 4.1 97 12.1 6.8-9.7 14.8-23.2 22.7-36.4 34.1-57.4 80.8-136 161.3-154.6l27-6.2 8.3 26.4c1.1 3.4 26.3 83.6 43.3 171.1 10.2 52.4 15.3 96.5 15.1 131.2-0.1 36.3-6.1 63.7-18.1 82.6 24.6 52.3 37.5 109.9 37.5 167.9 0 53.5-10.9 100.6-32.3 140-20.2 37.2-50.1 68.1-88.8 91.6-34.4 21-76.7 36.6-125.5 46.4-43 8.9-92.7 13.3-147.5 13.3zM258.6 154.1c-10.8 31.2-28.2 84.1-41.7 138.6-12.1 48.8-18.8 89-19.8 119.6-1.2 35.7 6 48.2 8.6 49.7l24.6 14.6-13.5 25.3c-25.7 48.1-39.2 102.4-39.2 157 0 83.6 30.2 142.6 92.3 180.4 55.3 33.7 136.7 50.7 242 50.7s186.7-17.1 242-50.7c62.1-37.8 92.3-96.8 92.3-180.4 0-55.3-13.8-110-39.9-158.4l-12.8-23.7 22.2-15.3c0.3-0.2 26.7-20.3-3-173-10.2-52.5-23.7-103.1-32.6-134-41.5 23.2-71.8 74.1-96.9 116.5-16.3 27.4-29.2 49.1-44.3 62.3l-12.6 11-16-4.9c-31.9-9.8-65-14.8-98.4-14.8-34.2 0-68.1 5.2-100.7 15.5l-16.1 5.1-12.8-11.2c-16.5-14.6-28.5-39.4-42.5-68.2-19.6-40.6-43.2-89.5-81.2-111.7z"
                p-id="11540"
                fill="#707070"
              ></path>
            </svg>
            昵称：
          </span>
          <span>{{ petInfomation.name_hz }}</span>
        </div>
      </div>
      <div class="pet-info-item">
        <span>
          <svg
            t="1600238992483"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="11965"
            width="16"
            height="16"
          >
            <path
              d="M512 18.4832C239.445333 18.4832 18.4832 239.445333 18.4832 512 18.4832 784.554667 239.445333 1005.5168 512 1005.5168c272.554667 0 493.5168-220.945067 493.5168-493.5168C1005.5168 239.445333 784.554667 18.4832 512 18.4832zM512 974.216533C256.7168 974.216533 49.783467 767.2832 49.783467 512S256.7168 49.783467 512 49.783467 974.216533 256.7168 974.216533 512 767.2832 974.216533 512 974.216533z"
              p-id="11966"
              fill="#707070"
            ></path>
            <path
              d="M362.5472 583.8336c1.536 5.461333 2.628267 11.1104 2.628267 17.066667 0 34.952533-28.330667 63.2832-63.2832 63.2832-34.952533 0-63.2832-28.330667-63.2832-63.2832 0-19.694933 9.284267-36.9664 23.3984-48.571733 0.512 0.290133 0.9728 0.648533 1.4848 0.9216L263.492267 550.912l0-20.258133 0-2.3552c-0.512 0.273067-0.9728 0.631467-1.4848 0.9216-14.114133-11.588267-23.3984-28.859733-23.3984-48.571733 0-34.952533 28.330667-63.2832 63.2832-63.2832 34.952533 0 63.2832 28.330667 63.2832 63.2832 0 5.956267-1.092267 11.605333-2.628267 17.066667l20.002133 0c1.160533-5.512533 1.809067-11.2128 1.809067-17.066667 0-45.550933-36.932267-82.4832-82.4832-82.4832s-82.4832 36.932267-82.4832 82.4832c0 23.8592 10.257067 45.141333 26.5216 60.125867-16.247467 14.967467-26.5216 36.266667-26.5216 60.125867 0 45.550933 36.932267 82.4832 82.4832 82.4832s82.4832-36.932267 82.4832-82.4832c0-5.853867-0.648533-11.554133-1.809067-17.066667L362.5472 583.8336z"
              p-id="11967"
              fill="#707070"
            ></path>
            <path
              d="M647.253333 583.8336c-1.536 5.461333-2.628267 11.1104-2.628267 17.066667 0 34.952533 28.330667 63.2832 63.2832 63.2832 34.952533 0 63.2832-28.330667 63.2832-63.2832 0-19.694933-9.284267-36.9664-23.3984-48.571733-0.512 0.290133-0.9728 0.648533-1.4848 0.9216L746.308267 550.912l0-20.258133 0-2.3552c0.512 0.273067 0.9728 0.631467 1.4848 0.9216 14.114133-11.588267 23.3984-28.859733 23.3984-48.571733 0-34.952533-28.330667-63.2832-63.2832-63.2832-34.952533 0-63.2832 28.330667-63.2832 63.2832 0 5.956267 1.092267 11.605333 2.628267 17.066667l-20.002133 0c-1.160533-5.512533-1.809067-11.2128-1.809067-17.066667 0-45.550933 36.932267-82.4832 82.4832-82.4832s82.4832 36.932267 82.4832 82.4832c0 23.8592-10.257067 45.141333-26.5216 60.125867 16.247467 14.967467 26.5216 36.266667 26.5216 60.125867 0 45.550933-36.932267 82.4832-82.4832 82.4832-45.550933 0-82.4832-36.932267-82.4832-82.4832 0-5.853867 0.648533-11.554133 1.809067-17.066667L647.253333 583.8336z"
              p-id="11968"
              fill="#707070"
            ></path>
            <path
              d="M649.6768 503.415467 360.226133 503.415467 364.9024 485.034667 644.6592 485.034667Z"
              p-id="11969"
              fill="#707070"
            ></path>
            <path
              d="M646.6048 586.257067 363.195733 586.257067 358.144 567.876267 651.963733 567.876267Z"
              p-id="11970"
              fill="#707070"
            ></path>
          </svg>
          品种：
        </span>
        <span>{{ petInfomation.race_value_hz }}</span>
      </div>
      <div class="pet-info-item">
        <span>
          <svg
            t="1600239043553"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="5094"
            width="16"
            height="16"
          >
            <path
              d="M306.623 619.695c125.358-17.375 221.908-124.92 221.908-255.05 0-142.289-115.312-257.6-257.607-257.6-142.238-0.001-257.6 115.311-257.6 257.6 0 130.13 96.544 237.675 221.961 255.05V743.72H68.45v71.228h166.835v166.886h71.286V815.002h166.828v-71.23H306.623V619.695zM84.72 364.645c0-102.93 83.334-186.262 186.204-186.262 102.93 0 186.262 83.389 186.262 186.262 0 102.875-83.333 186.262-186.262 186.262-102.87 0-186.204-83.387-186.204-186.262z m0 0M504.103 757.32c0.05 142.295 115.42 257.605 257.768 257.548 142.29-0.058 257.543-115.422 257.49-257.71-0.057-130.138-96.66-237.617-222.018-254.993l-0.11-261.378 68.123 68.175 50.411-50.411-118.644-118.532-35.698-35.642-154.064 154.226 50.41 50.359 68.176-68.235 0.116 261.38c-125.475 17.486-222.019 125.078-221.96 255.212z m443.862-0.162c0.11 102.929-83.275 186.313-186.211 186.371-102.928 0.052-186.262-83.332-186.314-186.21 0-102.87 83.276-186.26 186.204-186.313 102.878-0.11 186.263 83.277 186.32 186.152z m0 0"
              p-id="5095"
              fill="#707070"
            ></path>
          </svg>
          性别：
        </span>
        <span>{{ petInfomation.sex_value_hz }}</span>
      </div>
      <div class="pet-info-item">
        <span>
          <svg
            t="1600239112690"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="6694"
            width="16"
            height="16"
          >
            <path
              d="M906.24 256L527.36 35.84c-10.24-5.12-15.36-5.12-25.6 0L117.76 256c-5.12 5.12-10.24 15.36-10.24 25.6V716.8c0 10.24 5.12 15.36 15.36 20.48l378.88 220.16c5.12 0 10.24 5.12 10.24 5.12 5.12 0 10.24 0 15.36-5.12l378.88-220.16c10.24-5.12 15.36-15.36 15.36-20.48V281.6c-5.12-10.24-10.24-20.48-15.36-25.6z m-40.96 450.56l-353.28 204.8-353.28-204.8v-409.6l353.28-204.8 353.28 204.8v409.6z"
              p-id="6695"
              fill="#707070"
            ></path>
            <path
              d="M317.44 389.12c-5.12 10.24 0 25.6 10.24 30.72L486.4 512v209.92c0 15.36 10.24 25.6 25.6 25.6s25.6-10.24 25.6-25.6v-204.8l163.84-92.16c10.24-5.12 15.36-20.48 10.24-35.84-5.12-10.24-20.48-15.36-35.84-10.24L512 471.04 353.28 378.88c-10.24-10.24-30.72-5.12-35.84 10.24z"
              p-id="6696"
              fill="#707070"
            ></path>
          </svg>
          特点：
        </span>
        <span v-for="(item, i) in features" :key="i">{{ item }}</span>
      </div>
      <div class="pet-info-item">
        <span>
          <svg
            t="1600239155651"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="7624"
            width="16"
            height="16"
          >
            <path
              d="M841.142857 36.571429A109.714286 109.714286 0 0 1 950.857143 146.285714v731.428572a109.714286 109.714286 0 0 1-109.714286 109.714285h-658.285714A109.714286 109.714286 0 0 1 73.142857 877.714286V146.285714A109.714286 109.714286 0 0 1 182.857143 36.571429z m0 73.142857h-658.285714A36.571429 36.571429 0 0 0 146.285714 146.285714v731.428572a36.571429 36.571429 0 0 0 36.571429 36.571428h658.285714a36.571429 36.571429 0 0 0 36.571429-36.571428V146.285714a36.571429 36.571429 0 0 0-36.571429-36.571428z m-219.428571 438.857143A109.714286 109.714286 0 0 1 731.428571 658.285714c0 60.562286-49.152 109.714286-111.835428 109.714286l-10.605714-0.731429a109.787429 109.787429 0 0 1-90.697143-72.338285L329.142857 694.857143a36.571429 36.571429 0 0 1-6.582857-72.557714L329.142857 621.714286h189.147429c15.067429-42.642286 55.661714-73.142857 103.424-73.142857z m0 73.142857A36.571429 36.571429 0 0 0 585.142857 658.285714c0 18.578286 13.970286 34.230857 30.134857 36.132572L621.714286 694.857143a36.571429 36.571429 0 0 0 0-73.142857z m-219.428572-365.714286c47.762286 0 88.356571 30.500571 103.424 73.142857H694.857143a36.571429 36.571429 0 0 1 6.582857 72.557714L694.857143 402.285714l-189.147429 0.073143a111.104 111.104 0 0 1-92.818285 72.484572L402.285714 475.428571a109.714286 109.714286 0 0 1 0-219.428571z m0 73.142857A36.571429 36.571429 0 0 0 365.714286 365.714286c0 20.187429 16.384 36.571429 34.450285 36.571428l6.436572-0.219428A36.571429 36.571429 0 0 0 402.285714 329.142857z"
              p-id="7625"
              fill="#707070"
            ></path>
          </svg>
          公开：
        </span>
        <span>{{ petInfomation.visual_hz === true ? '是' : '否' }}</span>
      </div>
      <div class="pet-info-item">
        <span>
          <svg
            t="1600239181674"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="12247"
            width="16"
            height="16"
          >
            <path
              d="M866.1 604.6c-58.6-58.6-136.5-90.9-219.4-90.9h-61.5V379.2c0-34.7-28.3-63-63-63h-23.7c-34.7 0-63 28.3-63 63v134.6h-54.8c-82.9 0-160.8 32.3-219.4 90.9-58.6 58.5-90.9 136.4-90.9 219.3v132.8h886.5V824c0-82.9-32.2-160.8-90.8-219.4zM481.9 379.2c0-9.1 7.4-16.5 16.5-16.5h23.7c9.1 0 16.5 7.4 16.5 16.5v134.6h-56.7V379.2z m405.3 507.9H140.1v-63c0-132.6 107.9-240.5 240.5-240.5h266.1c132.6 0 240.5 107.9 240.5 240.5v63zM503.8 289.2c37.6 0 58-15.7 68.6-28.9 14.1-17.6 19.3-42.1 14-65.5-2.1-9.2-8.1-25.9-36-64.9-14.5-20.2-28-36.8-28.5-37.5l-19.7-24.2L484.6 94c-0.5 0.8-13.2 19.6-26.5 40.8-25.4 40.7-29.9 53.8-31.1 61.9-1 6.8-4.7 42.1 18 68.3 9.6 11 27.6 24.2 58.8 24.2z m-30.9-85.5c2.2-7.6 16.4-31.7 32.4-56.8 17.8 24 33.5 48.3 35.7 58.1 1.7 7.5 1.3 18.3-5 26.2-6.1 7.6-16.9 11.5-32.2 11.5-16.5 0-21.9-6.2-23.6-8.2-7.2-8.3-8.3-22.7-7.3-30.8z"
              p-id="12248"
              fill="#707070"
            ></path>
          </svg>
          生日：
        </span>
        <span>{{ petInfomation.birth_hz }}</span>
      </div>
      <div class="pet-info-item">
        <span>
          <svg
            t="1600239245926"
            class="icon"
            viewBox="0 0 1097 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="8866"
            width="16"
            height="16"
          >
            <path
              d="M365.714286 329.142857q0 45.714286-32 77.714286t-77.714286 32-77.714286-32-32-77.714286 32-77.714286 77.714286-32 77.714286 32 32 77.714286z m585.142857 219.428572v256H146.285714v-109.714286l182.857143-182.857143 91.428572 91.428571 292.571428-292.571428z m54.857143-402.285715H91.428571q-7.428571 0-12.857142 5.428572T73.142857 164.571429v694.857142q0 7.428571 5.428572 12.857143T91.428571 877.714286h914.285715q7.428571 0 12.857143-5.428572t5.428571-12.857143V164.571429q0-7.428571-5.428571-12.857143T1005.714286 146.285714z m91.428571 18.285715v694.857142q0 37.714286-26.857143 64.571429t-64.571428 26.857143H91.428571q-37.714286 0-64.571428-26.857143t-26.857143-64.571429V164.571429q0-37.714286 26.857143-64.571429t64.571428-26.857143h914.285715q37.714286 0 64.571428 26.857143t26.857143 64.571429z"
              p-id="8867"
              fill="#707070"
            ></path>
          </svg>
          照片：
        </span>
      </div>
      <ul>
        <li v-for="item in petInfomation.image_hz" :key="item.id">
          <img :src="item.image_hz" :alt="item.image_hz" style="width:500px;" />
        </li>
      </ul>
    </div>
    <div class="content" v-if="editActive">
      <div class="pet-avatar" @click.stop="uploadTrigger(0)">
        <el-avatar :size="100" :src="defaultImage.image_hz"></el-avatar>

        <input
          id="fileTop"
          name="fileTop"
          type="file"
          accept="image/png, image/gif, image/jpeg"
          @change="petImageUpload"
        />
      </div>
      <div>
        <div class="pet-info-item">
          <span>
            <svg
              t="1600238957909"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="11539"
              width="16"
              height="16"
            >
              <path
                d="M511.8 950c-54.8 0-104.5-4.4-147.7-13.1-48.8-9.8-91-25.4-125.5-46.4-38.7-23.6-68.6-54.4-88.8-91.6-21.4-39.4-32.3-86.5-32.3-140 0-57 12.5-113.7 36.4-165.4-12.6-18.9-18.1-46.5-16.9-83.5 1.2-34.8 8.5-79.3 21.6-132.3 22-88.4 52.6-169.9 53.9-173.3l9.3-24.5 25.6 5.9c81.1 18.7 118.9 96.9 146.4 153.9 6.3 13.1 13.2 27.3 19.3 37.4 32.2-8.3 65.3-12.5 98.7-12.5 32.8 0 65.3 4.1 97 12.1 6.8-9.7 14.8-23.2 22.7-36.4 34.1-57.4 80.8-136 161.3-154.6l27-6.2 8.3 26.4c1.1 3.4 26.3 83.6 43.3 171.1 10.2 52.4 15.3 96.5 15.1 131.2-0.1 36.3-6.1 63.7-18.1 82.6 24.6 52.3 37.5 109.9 37.5 167.9 0 53.5-10.9 100.6-32.3 140-20.2 37.2-50.1 68.1-88.8 91.6-34.4 21-76.7 36.6-125.5 46.4-43 8.9-92.7 13.3-147.5 13.3zM258.6 154.1c-10.8 31.2-28.2 84.1-41.7 138.6-12.1 48.8-18.8 89-19.8 119.6-1.2 35.7 6 48.2 8.6 49.7l24.6 14.6-13.5 25.3c-25.7 48.1-39.2 102.4-39.2 157 0 83.6 30.2 142.6 92.3 180.4 55.3 33.7 136.7 50.7 242 50.7s186.7-17.1 242-50.7c62.1-37.8 92.3-96.8 92.3-180.4 0-55.3-13.8-110-39.9-158.4l-12.8-23.7 22.2-15.3c0.3-0.2 26.7-20.3-3-173-10.2-52.5-23.7-103.1-32.6-134-41.5 23.2-71.8 74.1-96.9 116.5-16.3 27.4-29.2 49.1-44.3 62.3l-12.6 11-16-4.9c-31.9-9.8-65-14.8-98.4-14.8-34.2 0-68.1 5.2-100.7 15.5l-16.1 5.1-12.8-11.2c-16.5-14.6-28.5-39.4-42.5-68.2-19.6-40.6-43.2-89.5-81.2-111.7z"
                p-id="11540"
                fill="#707070"
              ></path>
            </svg>

            昵称：
          </span>
          <el-input v-model="name"></el-input>
        </div>
      </div>
      <div class="pet-info-item-feature">
        <span class="span">
          <svg
            t="1600239112690"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="6694"
            width="16"
            height="16"
          >
            <path
              d="M906.24 256L527.36 35.84c-10.24-5.12-15.36-5.12-25.6 0L117.76 256c-5.12 5.12-10.24 15.36-10.24 25.6V716.8c0 10.24 5.12 15.36 15.36 20.48l378.88 220.16c5.12 0 10.24 5.12 10.24 5.12 5.12 0 10.24 0 15.36-5.12l378.88-220.16c10.24-5.12 15.36-15.36 15.36-20.48V281.6c-5.12-10.24-10.24-20.48-15.36-25.6z m-40.96 450.56l-353.28 204.8-353.28-204.8v-409.6l353.28-204.8 353.28 204.8v409.6z"
              p-id="6695"
              fill="#707070"
            ></path>
            <path
              d="M317.44 389.12c-5.12 10.24 0 25.6 10.24 30.72L486.4 512v209.92c0 15.36 10.24 25.6 25.6 25.6s25.6-10.24 25.6-25.6v-204.8l163.84-92.16c10.24-5.12 15.36-20.48 10.24-35.84-5.12-10.24-20.48-15.36-35.84-10.24L512 471.04 353.28 378.88c-10.24-10.24-30.72-5.12-35.84 10.24z"
              p-id="6696"
              fill="#707070"
            ></path>
          </svg>
          特征：
        </span>

        <el-tag
          :key="tag"
          v-for="tag in features"
          closable
          :disable-transition="false"
          @close="handleClose(tag)"
          >{{ tag }}</el-tag
        >
        <el-input
          class="input-new-tag"
          v-if="inputVisible"
          ref="saveTagInput"
          size="small"
          @keyup.enter.native="handleInputConfirm"
          @blur="handleInputConfirm"
          v-model="featureInputValue"
        ></el-input>
        <el-button class="button-new-tag" v-else size="small" @click="showInput">+特点</el-button>
      </div>

      <div class="pet-info-item">
        <span>
          <svg
            t="1600238992483"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="11965"
            width="16"
            height="16"
          >
            <path
              d="M512 18.4832C239.445333 18.4832 18.4832 239.445333 18.4832 512 18.4832 784.554667 239.445333 1005.5168 512 1005.5168c272.554667 0 493.5168-220.945067 493.5168-493.5168C1005.5168 239.445333 784.554667 18.4832 512 18.4832zM512 974.216533C256.7168 974.216533 49.783467 767.2832 49.783467 512S256.7168 49.783467 512 49.783467 974.216533 256.7168 974.216533 512 767.2832 974.216533 512 974.216533z"
              p-id="11966"
              fill="#000"
            ></path>
            <path
              d="M362.5472 583.8336c1.536 5.461333 2.628267 11.1104 2.628267 17.066667 0 34.952533-28.330667 63.2832-63.2832 63.2832-34.952533 0-63.2832-28.330667-63.2832-63.2832 0-19.694933 9.284267-36.9664 23.3984-48.571733 0.512 0.290133 0.9728 0.648533 1.4848 0.9216L263.492267 550.912l0-20.258133 0-2.3552c-0.512 0.273067-0.9728 0.631467-1.4848 0.9216-14.114133-11.588267-23.3984-28.859733-23.3984-48.571733 0-34.952533 28.330667-63.2832 63.2832-63.2832 34.952533 0 63.2832 28.330667 63.2832 63.2832 0 5.956267-1.092267 11.605333-2.628267 17.066667l20.002133 0c1.160533-5.512533 1.809067-11.2128 1.809067-17.066667 0-45.550933-36.932267-82.4832-82.4832-82.4832s-82.4832 36.932267-82.4832 82.4832c0 23.8592 10.257067 45.141333 26.5216 60.125867-16.247467 14.967467-26.5216 36.266667-26.5216 60.125867 0 45.550933 36.932267 82.4832 82.4832 82.4832s82.4832-36.932267 82.4832-82.4832c0-5.853867-0.648533-11.554133-1.809067-17.066667L362.5472 583.8336z"
              p-id="11967"
              fill="#000"
            ></path>
            <path
              d="M647.253333 583.8336c-1.536 5.461333-2.628267 11.1104-2.628267 17.066667 0 34.952533 28.330667 63.2832 63.2832 63.2832 34.952533 0 63.2832-28.330667 63.2832-63.2832 0-19.694933-9.284267-36.9664-23.3984-48.571733-0.512 0.290133-0.9728 0.648533-1.4848 0.9216L746.308267 550.912l0-20.258133 0-2.3552c0.512 0.273067 0.9728 0.631467 1.4848 0.9216 14.114133-11.588267 23.3984-28.859733 23.3984-48.571733 0-34.952533-28.330667-63.2832-63.2832-63.2832-34.952533 0-63.2832 28.330667-63.2832 63.2832 0 5.956267 1.092267 11.605333 2.628267 17.066667l-20.002133 0c-1.160533-5.512533-1.809067-11.2128-1.809067-17.066667 0-45.550933 36.932267-82.4832 82.4832-82.4832s82.4832 36.932267 82.4832 82.4832c0 23.8592-10.257067 45.141333-26.5216 60.125867 16.247467 14.967467 26.5216 36.266667 26.5216 60.125867 0 45.550933-36.932267 82.4832-82.4832 82.4832-45.550933 0-82.4832-36.932267-82.4832-82.4832 0-5.853867 0.648533-11.554133 1.809067-17.066667L647.253333 583.8336z"
              p-id="11968"
              fill="#000"
            ></path>
            <path
              d="M649.6768 503.415467 360.226133 503.415467 364.9024 485.034667 644.6592 485.034667Z"
              p-id="11969"
              fill="#000"
            ></path>
            <path
              d="M646.6048 586.257067 363.195733 586.257067 358.144 567.876267 651.963733 567.876267Z"
              p-id="11970"
              fill="#000"
            ></path>
          </svg>
          品种：
        </span>
        <el-select style="width:150px" v-model="raceValue">
          <el-option
            v-for="item in race"
            :label="item.label"
            :key="item.value"
            :value="item.value"
          ></el-option>
        </el-select>
      </div>
      <div class="pet-info-item">
        <span>
          <svg
            t="1600239043553"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="5094"
            width="16"
            height="16"
          >
            <path
              d="M306.623 619.695c125.358-17.375 221.908-124.92 221.908-255.05 0-142.289-115.312-257.6-257.607-257.6-142.238-0.001-257.6 115.311-257.6 257.6 0 130.13 96.544 237.675 221.961 255.05V743.72H68.45v71.228h166.835v166.886h71.286V815.002h166.828v-71.23H306.623V619.695zM84.72 364.645c0-102.93 83.334-186.262 186.204-186.262 102.93 0 186.262 83.389 186.262 186.262 0 102.875-83.333 186.262-186.262 186.262-102.87 0-186.204-83.387-186.204-186.262z m0 0M504.103 757.32c0.05 142.295 115.42 257.605 257.768 257.548 142.29-0.058 257.543-115.422 257.49-257.71-0.057-130.138-96.66-237.617-222.018-254.993l-0.11-261.378 68.123 68.175 50.411-50.411-118.644-118.532-35.698-35.642-154.064 154.226 50.41 50.359 68.176-68.235 0.116 261.38c-125.475 17.486-222.019 125.078-221.96 255.212z m443.862-0.162c0.11 102.929-83.275 186.313-186.211 186.371-102.928 0.052-186.262-83.332-186.314-186.21 0-102.87 83.276-186.26 186.204-186.313 102.878-0.11 186.263 83.277 186.32 186.152z m0 0"
              p-id="5095"
              fill="#000"
            ></path>
          </svg>
          性别：
        </span>
        <el-select style="width:150px" v-model="sexValue">
          <el-option
            v-for="item in sex"
            :label="item.label"
            :key="item.value"
            :value="item.value"
          ></el-option>
        </el-select>
      </div>

      <div class="pet-info-item">
        <span>
          <svg
            t="1600239155651"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="7624"
            width="16"
            height="16"
          >
            <path
              d="M841.142857 36.571429A109.714286 109.714286 0 0 1 950.857143 146.285714v731.428572a109.714286 109.714286 0 0 1-109.714286 109.714285h-658.285714A109.714286 109.714286 0 0 1 73.142857 877.714286V146.285714A109.714286 109.714286 0 0 1 182.857143 36.571429z m0 73.142857h-658.285714A36.571429 36.571429 0 0 0 146.285714 146.285714v731.428572a36.571429 36.571429 0 0 0 36.571429 36.571428h658.285714a36.571429 36.571429 0 0 0 36.571429-36.571428V146.285714a36.571429 36.571429 0 0 0-36.571429-36.571428z m-219.428571 438.857143A109.714286 109.714286 0 0 1 731.428571 658.285714c0 60.562286-49.152 109.714286-111.835428 109.714286l-10.605714-0.731429a109.787429 109.787429 0 0 1-90.697143-72.338285L329.142857 694.857143a36.571429 36.571429 0 0 1-6.582857-72.557714L329.142857 621.714286h189.147429c15.067429-42.642286 55.661714-73.142857 103.424-73.142857z m0 73.142857A36.571429 36.571429 0 0 0 585.142857 658.285714c0 18.578286 13.970286 34.230857 30.134857 36.132572L621.714286 694.857143a36.571429 36.571429 0 0 0 0-73.142857z m-219.428572-365.714286c47.762286 0 88.356571 30.500571 103.424 73.142857H694.857143a36.571429 36.571429 0 0 1 6.582857 72.557714L694.857143 402.285714l-189.147429 0.073143a111.104 111.104 0 0 1-92.818285 72.484572L402.285714 475.428571a109.714286 109.714286 0 0 1 0-219.428571z m0 73.142857A36.571429 36.571429 0 0 0 365.714286 365.714286c0 20.187429 16.384 36.571429 34.450285 36.571428l6.436572-0.219428A36.571429 36.571429 0 0 0 402.285714 329.142857z"
              p-id="7625"
              fill="#707070"
            ></path>
          </svg>
          公开：
        </span>
        <el-select style="width:150px" v-model="isVisual">
          <el-option
            v-for="item in visual"
            :label="item.label"
            :key="item.value"
            :value="item.value"
          ></el-option>
        </el-select>
      </div>
      <div class="pet-info-item">
        <span>
          <svg
            t="1600239181674"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="12247"
            width="16"
            height="16"
          >
            <path
              d="M866.1 604.6c-58.6-58.6-136.5-90.9-219.4-90.9h-61.5V379.2c0-34.7-28.3-63-63-63h-23.7c-34.7 0-63 28.3-63 63v134.6h-54.8c-82.9 0-160.8 32.3-219.4 90.9-58.6 58.5-90.9 136.4-90.9 219.3v132.8h886.5V824c0-82.9-32.2-160.8-90.8-219.4zM481.9 379.2c0-9.1 7.4-16.5 16.5-16.5h23.7c9.1 0 16.5 7.4 16.5 16.5v134.6h-56.7V379.2z m405.3 507.9H140.1v-63c0-132.6 107.9-240.5 240.5-240.5h266.1c132.6 0 240.5 107.9 240.5 240.5v63zM503.8 289.2c37.6 0 58-15.7 68.6-28.9 14.1-17.6 19.3-42.1 14-65.5-2.1-9.2-8.1-25.9-36-64.9-14.5-20.2-28-36.8-28.5-37.5l-19.7-24.2L484.6 94c-0.5 0.8-13.2 19.6-26.5 40.8-25.4 40.7-29.9 53.8-31.1 61.9-1 6.8-4.7 42.1 18 68.3 9.6 11 27.6 24.2 58.8 24.2z m-30.9-85.5c2.2-7.6 16.4-31.7 32.4-56.8 17.8 24 33.5 48.3 35.7 58.1 1.7 7.5 1.3 18.3-5 26.2-6.1 7.6-16.9 11.5-32.2 11.5-16.5 0-21.9-6.2-23.6-8.2-7.2-8.3-8.3-22.7-7.3-30.8z"
              p-id="12248"
              fill="#707070"
            ></path>
          </svg>
          生日：
        </span>
        <el-date-picker
          v-model="birthday"
          value-format="yyyy-MM-dd"
          type="date"
          placeholder="选择日期"
        ></el-date-picker>
      </div>
      <div class="pet-info-item">
        <span>
          <svg
            t="1600239245926"
            class="icon"
            viewBox="0 0 1097 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="8866"
            width="16"
            height="16"
          >
            <path
              d="M365.714286 329.142857q0 45.714286-32 77.714286t-77.714286 32-77.714286-32-32-77.714286 32-77.714286 77.714286-32 77.714286 32 32 77.714286z m585.142857 219.428572v256H146.285714v-109.714286l182.857143-182.857143 91.428572 91.428571 292.571428-292.571428z m54.857143-402.285715H91.428571q-7.428571 0-12.857142 5.428572T73.142857 164.571429v694.857142q0 7.428571 5.428572 12.857143T91.428571 877.714286h914.285715q7.428571 0 12.857143-5.428572t5.428571-12.857143V164.571429q0-7.428571-5.428571-12.857143T1005.714286 146.285714z m91.428571 18.285715v694.857142q0 37.714286-26.857143 64.571429t-64.571428 26.857143H91.428571q-37.714286 0-64.571428-26.857143t-26.857143-64.571429V164.571429q0-37.714286 26.857143-64.571429t64.571428-26.857143h914.285715q37.714286 0 64.571428 26.857143t26.857143 64.571429z"
              p-id="8867"
              fill="#707070"
            ></path>
          </svg>
          照片：
        </span>
        <el-button @click="uploadTrigger(1)" class="upload-pic">
          上传图片
          <input
            v-show="false"
            id="file2"
            name="file2"
            type="file"
            accept="image/png, image/gif, image/jpeg"
            @change="petImageUpload"
          />
        </el-button>
      </div>

      <ul style="display:flex; flex-direction: column;">
        <li class="pic-list" v-for="item in image" :key="item.id">
          <div style="width:300px; height:200px;display: contents;">
            <i @click="delPic(item.id)" class="el-icon-delete del-pic" font-size="100px"></i>
            <img :src="item.image" :alt="item.image" style="width:300px; height:200px" />
          </div>
        </li>
      </ul>

      <div class="pet-info-bottom">
        <el-button type="primary" style="margin-right:20px;" @click="postpetInfo()"
          >确定修改</el-button
        >
        <el-button @click="back()">取消</el-button>
      </div>
    </div>
    <div class="list-null content" v-if="showContent === false && editActive === false">
      <h3 class="title" style="color:#999;">没有找到这个小可爱哦(╥╯^╰╥)</h3>
    </div>
  </div>
</template>

<script>
import { petInfo } from '@/request/api'
import axios from 'axios' // 引入axios
export default {
  computed: {
    userInformation() {
      return this.$store.state.userInfo.userInformation
    }
  },
  data() {
    return {
      inputVisible: false,
      featureInputValue: '',
      //
      imageType: 1,
      petInfomation: {},
      infoStatus: 0,
      showContent: false,
      editActive: false,
      defaultImage: {},
      features: [],
      name: '',
      race: [
        { value: 0, label: '猫' },
        { value: 1, label: '狗' },
        { value: 2, label: '其他' }
      ],
      raceValue: 0,
      sex: [
        { value: 0, label: '公' },
        { value: 1, label: '母' }
      ],
      sexValue: 0,
      visual: [
        { value: true, label: '是' },
        { value: false, label: '否' }
      ],
      isVisual: '',
      birthday: '',
      image: []
    }
  },
  props: ['id'],
  methods: {
    back() {
      this.editActive = !this.editActive
      this.showContent = !this.showContent
    },
    uploadTrigger(x) {
      console.log('uploadTrigger')
      this.imageType = x
      if (x === 0) {
        document.getElementById('fileTop').click()
      } else {
        document.getElementById('file2').click()
      }
    },
    petImageUpload(e) {
      console.log('---------------')
      const file = e.target.files[0]
      const param = new FormData()
      param.append('image_hz', file)
      const headers = {
        headers: {
          'content-type': 'multipart/form-data'
        }
      }

      axios.post(this.$URL + '/v1/pet/image/create', param, headers).then(
        res => {
          console.log(res)
          if (res.status === 201) {
            this.$message({
              message: '上传成功',
              type: 'success'
            })
            if (this.imageType === 0) {
              this.defaultImage = { id: res.data.id, image_hz: res.data.image_hz }
            } else {
              this.image.push({ id: res.data.id, image: res.data.image_hz })
            }
          }
        },
        err => {
          console.log(err)
        }
      )
    },
    getPetInfo() {
      petInfo(this.id).then(
        res => {
          console.log(res.data)
          this.petInfomation = res.data
          this.showContent = true

          this.features = res.data.features_value_hz
          this.raceValue = res.data.race_hz
          this.sexValue = res.data.sex_hz
          this.isVisual = res.data.visual_hz
          this.birthday = res.data.birth_hz
          this.name = res.data.name_hz
          this.defaultImage = res.data.default_image_hz
          for (const item of res.data.image_hz) {
            this.image.push({ id: item.id, image: item.image_hz })
          }
        },
        err => {
          console.log(err)
        }
      )

      // endLoading()
    },
    postpetInfo() {
      const info = {
        name_hz: this.name,
        sex_hz: this.sexValue,
        race_hz: this.raceValue,
        birth_hz: this.birthday,
        features_hz: this.features,
        default_image_hz: this.defaultImage.id,
        image: this.image,
        id: this.id
      }
      this.$store.dispatch('PostPet/postPetInfo', info).then(
        res => {
          console.log(res)
          if (res.data.code === 1231) {
            this.$message({
              message: '此宠物已发布领养哦，无法修改',
              type: 'warning'
            })
          } else if (res.data.code === 1232) {
            this.$message({
              message: '此宠物有人领养哦，无法修改',
              type: 'warning'
            })
          } else if (res.status === 200) {
            this.$message({
              message: '修改成功',
              type: 'success'
            })
            this.$router.go(0)
          }
        },
        err => {
          console.log(err)
          this.$message({
            message: '修改失败',
            type: 'error'
          })
        }
      )
    },
    deletePet() {
      this.$confirm('确定删除此宠物吗？', '提示', {
        confirmButtonText: '确定',
        cancelButtonText: '取消',
        type: 'waring'
      }).then(() => {
        this.$store.dispatch('PostPet/deletePet', this.id).then(
          res => {
            console.log(res)
            if (res.status === 204) {
              this.$message({
                message: '删除成功',
                type: 'success'
              })
              this.$router.go(-1)
            } else if (res.data.code === 1231) {
              this.$message({
                message: '此宠物已发布领养哦，无法删除',
                type: 'warning'
              })
            } else if (res.data.code === 1261) {
              this.$message({
                message: '此宠物已发布帮助众筹，无法删除',
                type: 'warning'
              })
            }
          },
          err => {
            console.log(err)
            if (err.status === 204) {
              this.$message({
                message: '删除成功',
                type: 'success'
              })
              this.$router.go(-1)
            }
          }
        )
      })
    },
    delPic(imgId) {
      this.image = this.image.filter(obj => obj.id !== imgId)
      console.log(this.image)
    },
    handleClose(tag) {
      this.features.splice(this.features.indexOf(tag), 1)
    },
    handleInputConfirm() {
      const inputValue = this.featureInputValue
      if (inputValue) {
        this.features.push(inputValue)
      }
      this.inputVisible = false
      this.featureInputValue = ''
    },
    showInput() {
      this.inputVisible = true
      this.$nextTick(() => {
        this.$refs.saveTagInput.$refs.input.focus()
      })
    }
  },
  created() {
    // showLoading()
    this.getPetInfo()
  },
  watch: {}
}
</script>

<style scoped>
.back-icon {
  float: left;
  opacity: 0.5;
  margin-left: 20px;
}
.list-null {
  height: 300px;
  width: 100%;
  align-items: center;
  display: flex;
  justify-content: center;
  text-align: center;
}
.my-pets {
  height: 100%;
}

#fileTop {
  opacity: 0;
  width: 1px;
}
.content {
  padding-top: 20px;
  border-top: 1px solid #f1f1f1;
  margin: 20px;
}
.pet-info-item span,
.pet-info-item-feature .span {
  padding: 0px 15px;
  font-size: 17px;
  color: #4d4d4d;
}
.pet-info-item,
.pet-info-item-feature {
  /* background: #efefef; */
  padding: 15px;
  display: flex;
  justify-content: left;
  align-items: center;
}
.pet-avatar {
  float: right;
  margin-top: 20px;
  margin-right: 80px;
}
i {
  margin: 0px 5px;
}
.iconfont {
  font-size: 17px;
}
.edit-info {
  padding: 7px;
  font-size: 13px;
  border-radius: 5px;
  border: 1px solid #f1f1f1;
  background-color: #fff;
  color: #3183c7;
  margin-right: 15px;
}
.el-tag + .el-tag {
  margin-left: 10px;
}
.button-new-tag {
  margin-left: 10px;
  height: 32px;
  padding: 0px;
  width: 60px;
}
.input-new-tag {
  width: 80px;
  margin-left: 10px;
}
</style>
<style scoped>
.el-input {
  width: 200px;
}
.upload-pic {
  background-color: #efefef;
  width: 200px;
  height: 50px;
  border-radius: 50px;
  margin-bottom: 20px;
}
.pet-info-bottom {
  margin-top: 20px;
}
.pet-info-bottom .el-button {
  font-size: 13px;
  padding: 10px 18px;
}

.pic-list {
  display: inline-block;
  position: relative;
}

.pic-list:hover {
  opacity: 0.6;
}
.pic-list:hover .del-pic {
  opacity: 1;
}
.del-pic {
  position: absolute;
  top: 80px;
  left: 380px;
  font-size: 40px;
  opacity: 0;
}
</style>
